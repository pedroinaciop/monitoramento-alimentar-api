<?xml version="1.0" encoding="UTF-8"?>
<!-- Created with Jaspersoft Studio version 7.0.3.final using JasperReports Library version 6.20.1  -->
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="refeicoes" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="1a5f2a21-7ca9-490c-8302-46cdaf4e7456">
	<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
	<property name="com.jaspersoft.studio.data.defaultdataadapter" value="MySQL Connection"/>
	<property name="com.jaspersoft.studio.data.sql.SQLQueryDesigner.sash.w1" value="281"/>
	<property name="com.jaspersoft.studio.data.sql.SQLQueryDesigner.sash.w2" value="708"/>
	<parameter name="P_USUARIO_ID" class="java.lang.Long"/>
	<parameter name="P_DATA_INICIAL" class="java.sql.Date"/>
	<parameter name="P_DATA_FINAL" class="java.sql.Date"/>
	<queryString language="SQL">
		<![CDATA[SELECT 
    u.id AS usuario_id,
    i.id AS info_id,
    r.id AS refeicao_id,
    r.data_registro,
    u.nome_completo,
    i.idade, 
    u.email,
    i.sexo_biologico,
    r.tipo_refeicao,
    GROUP_CONCAT(
        CONCAT(a.nome_alimento, ' -  ', a.quantidade_alimento, ' ', a.unidade_alimento, ' ')
        SEPARATOR ', \n'
    ) AS alimentos
FROM usuario u
INNER JOIN info_usuario i
    ON i.usuario_id = u.id
INNER JOIN refeicao r
    ON r.usuario_id = u.id
INNER JOIN alimento a
    ON a.refeicao_id = r.id
WHERE u.id = $P{P_USUARIO_ID}
  AND r.data_registro BETWEEN $P{P_DATA_INICIAL} AND $P{P_DATA_FINAL}
GROUP BY 
    u.id, i.id, r.id, r.data_registro, 
    u.nome_completo, i.idade, u.email, i.sexo_biologico, r.tipo_refeicao
ORDER BY r.data_registro DESC;]]>
	</queryString>
	<field name="usuario_id" class="java.lang.Long">
		<property name="com.jaspersoft.studio.field.name" value="id"/>
		<property name="com.jaspersoft.studio.field.label" value="usuario_id"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="usuario"/>
	</field>
	<field name="info_id" class="java.lang.Long">
		<property name="com.jaspersoft.studio.field.name" value="id"/>
		<property name="com.jaspersoft.studio.field.label" value="info_id"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="info_usuario"/>
	</field>
	<field name="refeicao_id" class="java.lang.Long">
		<property name="com.jaspersoft.studio.field.name" value="id"/>
		<property name="com.jaspersoft.studio.field.label" value="refeicao_id"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="refeicao"/>
	</field>
	<field name="data_registro" class="java.time.LocalDateTime">
		<property name="com.jaspersoft.studio.field.name" value="data_registro"/>
		<property name="com.jaspersoft.studio.field.label" value="data_registro"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="refeicao"/>
	</field>
	<field name="nome_completo" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="nome_completo"/>
		<property name="com.jaspersoft.studio.field.label" value="nome_completo"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="usuario"/>
	</field>
	<field name="idade" class="java.lang.Integer">
		<property name="com.jaspersoft.studio.field.name" value="idade"/>
		<property name="com.jaspersoft.studio.field.label" value="idade"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="info_usuario"/>
	</field>
	<field name="email" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="email"/>
		<property name="com.jaspersoft.studio.field.label" value="email"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="usuario"/>
	</field>
	<field name="sexo_biologico" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="sexo_biologico"/>
		<property name="com.jaspersoft.studio.field.label" value="sexo_biologico"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="info_usuario"/>
	</field>
	<field name="tipo_refeicao" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="tipo_refeicao"/>
		<property name="com.jaspersoft.studio.field.label" value="tipo_refeicao"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="refeicao"/>
	</field>
	<field name="alimentos" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="alimentos"/>
		<property name="com.jaspersoft.studio.field.label" value="alimentos"/>
	</field>
	<background>
		<band splitType="Stretch"/>
	</background>
	<pageHeader>
		<band height="150">
			<property name="com.jaspersoft.studio.unit.height" value="px"/>
			<image>
				<reportElement x="40" y="23" width="168" height="105" uuid="eabf7871-114b-45bf-904e-c122f0c8172e"/>
				<imageExpression><![CDATA["https://raw.githubusercontent.com/pedroinaciop/tcc_BackEnd/refs/heads/main/src/main/resources/images/logo_750.png"]]></imageExpression>
			</image>
			<staticText>
				<reportElement x="290" y="60" width="200" height="20" uuid="2155d662-f7ad-4aca-8193-126177dfbea0"/>
				<textElement>
					<font fontName="Arial" size="16" isBold="true"/>
				</textElement>
				<text><![CDATA[RELATÓRIO DE MEDIDAS]]></text>
			</staticText>
			<staticText>
				<reportElement x="261" y="86" width="78" height="20" uuid="c6deb23b-183c-49fb-acef-a4c0bfba279b"/>
				<textElement verticalAlignment="Bottom">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Período Inicial:]]></text>
			</staticText>
			<textField evaluationTime="Page" pattern="dd/MM/yyyy">
				<reportElement x="340" y="86" width="60" height="20" uuid="373cb38c-4965-4df8-a829-621637c8c0c9"/>
				<textElement verticalAlignment="Bottom"/>
				<textFieldExpression><![CDATA[$P{P_DATA_INICIAL}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="400" y="86" width="70" height="20" uuid="0cbd9882-e467-4aa9-a5d6-f2f3f1a5971c">
					<property name="com.jaspersoft.studio.unit.y" value="px"/>
				</reportElement>
				<textElement verticalAlignment="Bottom">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Período Final:]]></text>
			</staticText>
			<textField pattern="dd/MM/yyyy">
				<reportElement x="470" y="86" width="60" height="20" uuid="a3955dae-7f76-423d-8424-893c02bfe610"/>
				<textElement verticalAlignment="Bottom"/>
				<textFieldExpression><![CDATA[$P{P_DATA_FINAL}]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<columnHeader>
		<band height="70" splitType="Stretch">
			<textField>
				<reportElement x="41" y="31" width="139" height="30" uuid="2bb001ca-4544-4646-97f1-886514807ba0">
					<property name="com.jaspersoft.studio.unit.y" value="px"/>
				</reportElement>
				<textElement>
					<font fontName="Arial" size="12"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{nome_completo}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="180" y="0" width="70" height="31" uuid="b6beeee6-e2ed-4cb5-9d34-4b70acc28235"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial" size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Idade]]></text>
			</staticText>
			<textField>
				<reportElement x="180" y="31" width="70" height="30" uuid="77a7f08b-e913-4680-aa5c-39cb7bd7550a"/>
				<textElement>
					<font fontName="Arial" size="12"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{idade}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="250" y="0" width="100" height="31" uuid="97baca2d-b83d-4e53-b166-423f2759b663"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial" size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Gênero]]></text>
			</staticText>
			<textField>
				<reportElement x="250" y="31" width="100" height="30" uuid="a341503b-49a9-4f9a-a81c-efc5cdd063d8"/>
				<textElement>
					<font fontName="Arial" size="12"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{sexo_biologico}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="350" y="0" width="170" height="31" uuid="e3841064-fea0-4405-9b12-bc4780b9758a"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial" size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[E-mail]]></text>
			</staticText>
			<textField>
				<reportElement x="350" y="31" width="170" height="30" uuid="4f04798e-4c06-4f01-86f4-4cc0e753a86f"/>
				<textElement>
					<font fontName="Arial" size="12"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{email}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="41" y="0" width="139" height="31" uuid="993fc339-cca8-4dcb-8336-b2d9bb918ab3"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial" size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Idade]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="150" splitType="Stretch">
			<property name="com.jaspersoft.studio.unit.height" value="px"/>
			<textField pattern="dd/MM/yyyy">
				<reportElement x="282" y="30" width="239" height="30" uuid="72b140f4-6a52-4481-99ff-ec02479a0154">
					<property name="com.jaspersoft.studio.spreadsheet.connectionID" value="41a5d8e7-a82c-4b34-a80e-de67ba8214f5"/>
				</reportElement>
				<box>
					<pen lineWidth="0.5" lineColor="#D2D2D2"/>
					<topPen lineWidth="0.5" lineColor="#D2D2D2"/>
					<leftPen lineWidth="0.5" lineColor="#D2D2D2"/>
					<bottomPen lineWidth="0.5" lineColor="#D2D2D2"/>
					<rightPen lineWidth="0.5" lineColor="#D2D2D2"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial" size="12"/>
				</textElement>
				<textFieldExpression><![CDATA["CAFE_MANHA".equals($F{tipo_refeicao}) ? " Café da Manhã" :
"ALMOCO".equals($F{tipo_refeicao}) ? " Almoço" :
"LANCHE".equals($F{tipo_refeicao}) ? " Lanche" :
"CAFE_TARDE".equals($F{tipo_refeicao}) ? " Café da Tarde" :
"JANTAR".equals($F{tipo_refeicao}) ? " Jantar" :
"CEIA".equals($F{tipo_refeicao}) ? " Ceia" :
" Desconhecido"]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Band" isBlankWhenNull="true" hyperlinkType="" hyperlinkTarget="">
				<reportElement positionType="Float" stretchType="ElementGroupHeight" x="42" y="100" width="479" height="50" isPrintWhenDetailOverflows="true" uuid="a2c5a047-8d60-42a6-a7ba-3e25d4d76b7f">
					<property name="com.jaspersoft.studio.spreadsheet.connectionID" value="4c4fdd38-eae1-4e0a-a19b-9d637f8106e4"/>
					<property name="com.jaspersoft.studio.unit.x" value="px"/>
					<property name="com.jaspersoft.studio.unit.y" value="px"/>
					<property name="com.jaspersoft.studio.unit.width" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
				</reportElement>
				<textElement textAlignment="Justified">
					<font fontName="Arial" size="12"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{alimentos}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="41" y="69" width="479" height="30" uuid="aafec193-99b3-4aca-a1e9-b9173721d2d5">
					<property name="com.jaspersoft.studio.spreadsheet.connectionID" value="4c4fdd38-eae1-4e0a-a19b-9d637f8106e4"/>
				</reportElement>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial" size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Alimentos]]></text>
			</staticText>
			<textField pattern="M/d/yy">
				<reportElement x="41" y="30" width="240" height="30" uuid="88136cb3-879c-46ce-8a20-8833a03776aa">
					<property name="com.jaspersoft.studio.spreadsheet.connectionID" value="9b1f2984-9db5-4161-a19a-8ccfb55da8cf"/>
				</reportElement>
				<box>
					<pen lineWidth="0.5" lineColor="#D2D2D2"/>
					<topPen lineWidth="0.5" lineColor="#D2D2D2"/>
					<leftPen lineWidth="0.5" lineColor="#D2D2D2"/>
					<bottomPen lineWidth="0.5" lineColor="#D2D2D2"/>
					<rightPen lineWidth="0.5" lineColor="#D2D2D2"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Arial" size="12"/>
				</textElement>
				<textFieldExpression><![CDATA[new java.text.SimpleDateFormat(" dd/MM/yyyy HH:mm")
    .format(java.sql.Timestamp.valueOf( $F{data_registro}))]]></textFieldExpression>
			</textField>
			<rectangle>
				<reportElement x="41" y="0" width="479" height="30" backcolor="#D5D5D5" uuid="8a873b27-a0e3-4db4-aabd-60b9bc91da37"/>
				<graphicElement>
					<pen lineWidth="0.0"/>
				</graphicElement>
			</rectangle>
			<staticText>
				<reportElement mode="Opaque" x="41" y="0" width="240" height="30" backcolor="rgba(252, 7, 3, 0.0)" uuid="a5a4b019-fe65-4757-b8d1-62f65c1f43b9"/>
				<box>
					<pen lineColor="#D2D2D2"/>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#D2D2D2"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#D2D2D2"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#D2D2D2"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#D2D2D2"/>
				</box>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font fontName="Arial" size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[ Data de Registro]]></text>
			</staticText>
			<staticText>
				<reportElement x="282" y="0" width="238" height="30" uuid="3875465f-c70b-4d66-a3be-05d7a06c7de9"/>
				<box>
					<pen lineColor="#D2D2D2"/>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#D2D2D2"/>
					<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#D2D2D2"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#D2D2D2"/>
					<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#D2D2D2"/>
				</box>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font fontName="Arial" size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[ Tipo de Refeição]]></text>
			</staticText>
		</band>
	</detail>
	<pageFooter>
		<band height="65" splitType="Stretch">
			<property name="com.jaspersoft.studio.unit.height" value="px"/>
			<textField pattern="dd/MM/yyyy hh:mm">
				<reportElement x="41" y="20" width="100" height="30" uuid="5e3133c5-0661-49e4-a9d4-6254fc0c8247"/>
				<textElement>
					<font fontName="Arial" size="12"/>
				</textElement>
				<textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="490" y="20" width="28" height="30" uuid="4e8e3036-e2b0-49e6-9a69-29a52e101cd5"/>
				<textElement textAlignment="Right"/>
				<textFieldExpression><![CDATA[$V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
		</band>
	</pageFooter>
</jasperReport>
